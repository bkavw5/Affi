<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Film LQH.DEV - Xem phim online chất lượng cao</title>
    <meta name="description" content="Xem phim online miễn phí, chất lượng cao với giao diện trực quan và dễ sử dụng. Phim mới cập nhật liên tục hàng ngày." />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0a0a0a;
            --panel: #1a1a1a;
            --accent: #e50914;
            --accent-hover: #ff0a16;
            --muted: #aaa;
            --text: #fff;
            --card-radius: 8px;
            --transition: all 0.3s ease;
            --header-height: 70px;
            --section-spacing: 30px;
        }
        
        * { 
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            padding-top: var(--header-height);
        }
        
        /* Header Styles */
        header {
            background: rgba(20, 20, 20, 0.95);
            padding: 0 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #2a2a2a;
        }
        
        #logo {
            display: flex;
            align-items: center;
        }
        
        #logo img {
            height: 40px;
            transition: var(--transition);
        }
        
        #logo img:hover {
            transform: scale(1.05);
        }
        
        #searchContainer {
            flex: 1;
            position: relative;
            max-width: 600px;
            margin: 0 20px;
        }
        
        #searchInput {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            border: none;
            background: #222;
            color: var(--text);
            font-size: 16px;
            transition: var(--transition);
            outline: none;
            padding-right: 50px;
        }
        
        #searchInput:focus {
            background: #2a2a2a;
            box-shadow: 0 0 0 2px var(--accent);
        }
        
        #searchBtn {
            position: absolute;
            right: 5px;
            top: 5px;
            padding: 7px 16px;
            border-radius: 30px;
            border: none;
            background: var(--accent);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        #searchBtn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }
        
        .nav-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .nav-icon {
            font-size: 20px;
            color: var(--text);
            transition: var(--transition);
            cursor: pointer;
        }
        
        .nav-icon:hover {
            color: var(--accent);
        }
        
        /* Hero Banner */
        .hero-banner {
            height: 500px;
            position: relative;
            overflow: hidden;
            border-radius: var(--card-radius);
            margin: 20px 0 var(--section-spacing);
        }
        
        .hero-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 30px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            z-index: 2;
        }
        
        .hero-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .hero-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .hero-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .hero-description {
            max-width: 600px;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .hero-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 12px 25px;
            border-radius: 30px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(10px);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* Main Content */
        main {
            padding: 0 20px 80px;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: var(--section-spacing) 0 20px;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .view-all {
            color: var(--accent);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .view-all:hover {
            text-decoration: underline;
        }
        
        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .movie-card {
            background: var(--panel);
            border-radius: var(--card-radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .movie-card:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }
        
        .movie-poster {
            width: 100%;
            height: 270px;
            object-fit: cover;
            display: block;
        }
        
        .movie-info {
            padding: 15px;
        }
        
        .movie-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 5px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 2.8rem;
        }
        
        .movie-meta {
            display: flex;
            justify-content: space-between;
            color: var(--muted);
            font-size: 0.85rem;
        }
        
        .movie-rating {
            display: flex;
            align-items: center;
            gap: 3px;
            color: #ffc107;
        }
        
        .movie-year {
            color: var(--muted);
        }
        
        .movie-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--accent);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Category Navigation */
        .category-nav {
            display: flex;
            overflow-x: auto;
            gap: 15px;
            padding: 15px 0;
            margin-bottom: var(--section-spacing);
            scrollbar-width: none;
        }
        
        .category-nav::-webkit-scrollbar {
            display: none;
        }
        
        .category-item {
            padding: 8px 20px;
            background: var(--panel);
            border-radius: 30px;
            white-space: nowrap;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }
        
        .category-item:hover, .category-item.active {
            background: var(--accent);
            color: white;
        }
        
        /* Filter Panel */
        .filter-container {
            padding: 12px 20px;
            background: #141414;
            display: flex;
            flex-direction: column;
            gap: 12px;
            border-bottom: 1px solid #2a2a2a;
        }
        
        #toggleFilterBtn {
            padding: 10px 16px;
            border: none;
            border-radius: 30px;
            background: var(--accent);
            color: #fff;
            cursor: pointer;
            font-weight: 600;
            width: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: var(--transition);
        }
        
        #toggleFilterBtn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }
        
        #filterPanel {
            display: none;
            gap: 12px;
            flex-wrap: wrap;
            animation: fadeIn 0.3s ease;
        }
        
        .filter-select {
            padding: 10px 16px;
            border-radius: 8px;
            background: #222;
            color: #fff;
            border: 1px solid #333;
            min-width: 160px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .filter-select:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        #applyFilterBtn, #clearFilterBtn {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        #applyFilterBtn {
            background: var(--accent);
        }
        
        #applyFilterBtn:hover {
            background: var(--accent-hover);
        }
        
        #clearFilterBtn {
            background: #333;
        }
        
        #clearFilterBtn:hover {
            background: #444;
        }
        
        .filter-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Popup Styles */
        .popup {
            position: fixed;
            inset: 0;
            display: none;
            justify-content: center;
            align-items: flex-start;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            overflow-y: auto;
            padding: 40px 12px;
            animation: fadeIn 0.3s ease;
        }
        
        .popup-content {
            width: 100%;
            max-width: 1000px;
            background: transparent;
            display: flex;
            flex-direction: column;
            animation: scaleIn 0.3s ease;
        }
        
        .player-container {
            width: 100%;
            background: black;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            aspect-ratio: 16/9;
        }
        
        iframe {
            width: 100%;
            height: 100%;
            border: 0;
            display: block;
        }
        
        .popup-body {
            display: flex;
            gap: 24px;
            padding: 24px;
            flex-wrap: wrap;
            background: rgba(30, 30, 30, 0.8);
            border-radius: 0 0 12px 12px;
            backdrop-filter: blur(10px);
        }
        
        .popup-body img {
            width: 280px;
            border-radius: 8px;
            object-fit: cover;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        
        .popup-info {
            flex: 1;
            min-width: 300px;
        }
        
        .popup-info h3 {
            margin: 0 0 12px;
            font-size: 24px;
            line-height: 1.3;
        }
        
        .meta {
            color: var(--muted);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 16px;
        }
        
        .meta span {
            margin-right: 16px;
        }
        
        .desc {
            color: #ddd;
            margin-top: 16px;
            font-size: 15px;
            line-height: 1.6;
            max-height: 120px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .desc.expanded {
            max-height: 1000px;
        }
        
        .toggle-btn {
            margin-top: 12px;
            padding: 8px 16px;
            background: #2a2a2a;
            border-radius: 6px;
            border: none;
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .toggle-btn:hover {
            background: #333;
        }
        
        .episodes {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
        }
        
        .episodes button {
            padding: 10px;
            background: #222;
            border: none;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .episodes button:hover {
            background: var(--accent);
        }
        
        .episodes button.active {
            background: var(--accent);
        }
        
        .close-btn {
            position: fixed;
            right: 24px;
            top: 24px;
            font-size: 32px;
            color: white;
            cursor: pointer;
            z-index: 2100;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .close-btn:hover {
            background: var(--accent);
            transform: rotate(90deg);
        }
        
        /* Footer Styles */
        footer {
            background: #111;
            color: var(--muted);
            padding: 50px 20px 30px;
            margin-top: 60px;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .footer-column h3 {
            color: var(--text);
            margin-bottom: 20px;
            font-size: 1.2rem;
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--accent);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: var(--muted);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-links a:hover {
            color: var(--accent);
        }
        
        .footer-bottom {
            max-width: 1200px;
            margin: 40px auto 0;
            padding-top: 20px;
            border-top: 1px solid #333;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #222;
            color: var(--text);
            transition: var(--transition);
        }
        
        .social-links a:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }
        
        /* Responsive Styles */
        @media (max-width: 1200px) {
            .movie-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }
        
        @media (max-width: 992px) {
            .hero-banner {
                height: 400px;
            }
            
            .hero-title {
                font-size: 2rem;
            }
        }
        
        @media (max-width: 768px) {
            :root {
                --header-height: 60px;
            }
            
            header {
                padding: 0 15px;
            }
            
            #searchContainer {
                margin: 0 10px;
            }
            
            .hero-banner {
                height: 350px;
            }
            
            .hero-title {
                font-size: 1.8rem;
            }
            
            .hero-content {
                padding: 20px;
            }
            
            .movie-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .movie-poster {
                height: 220px;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }
        
        @media (max-width: 576px) {
            .hero-banner {
                height: 300px;
            }
            
            .hero-title {
                font-size: 1.5rem;
            }
            
            .hero-description {
                font-size: 0.9rem;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .movie-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .movie-poster {
                height: 200px;
            }
            
            .section-title {
                font-size: 1.3rem;
            }
            
            .nav-menu {
                display: none;
            }
        }
    </style>
</head>
<body>

<header>
    <div id="logo">
        <img src="https://i.imgur.com/NEqqdDt.png" alt="Film LQH.DEV Logo" />
    </div>
    <div id="searchContainer">
        <input id="searchInput" placeholder="Tìm kiếm phim..." />
        <button id="searchBtn"><i class="fas fa-search"></i></button>
    </div>
    <div class="nav-menu">
        <a href="#" class="nav-icon"><i class="fas fa-heart"></i></a>
        <a href="#" class="nav-icon"><i class="fas fa-bell"></i></a>
        <a href="#" class="nav-icon"><i class="fas fa-user"></i></a>
    </div>
</header>

<div class="filter-container">
    <button id="toggleFilterBtn">
        <span>Lọc phim</span> 🎬
    </button>

    <div id="filterPanel">
        <select id="filterCategory" class="filter-select">
            <option value="">Thể loại</option>
            <option value="hanh-dong">Hành động</option>
            <option value="tinh-cam">Tình cảm</option>
            <option value="co-trang">Cổ trang</option>
            <option value="kinh-di">Kinh dị</option>
            <option value="chien-tranh">Chiến tranh</option>
            <option value="lich-su">Lịch sử</option>
            <option value="tre-em">Trẻ em</option>
            <option value="vien-tuong">Viễn tưởng</option>
            <option value="tai-lieu">Tài liệu</option>
            <option value="bi-an">Bí ẩn</option>
            <option value="phim-18">Phim 18+</option>
            <option value="tam-ly">Tâm lý</option>
            <option value="the-thao">Thể thao</option>
            <option value="phieu-luu">Phiêu lưu</option>
            <option value="am-nhac">Âm nhạc</option>
            <option value="gia-dinh">Gia đình</option>
            <option value="hoc-duong">Học đường</option>
            <option value="hai-huoc">Hài hước</option>
            <option value="hinh-su">Hình sự</option>
            <option value="vo-thuat">Võ thuật</option>
            <option value="khoa-hoc">Khoa học</option>
            <option value="than-thoai">Thần thoại</option>
            <option value="chinh-kich">Chính kịch</option>
            <option value="kinh-dien">Kinh điển</option>
            <option value="mien-tay">Miền tây</option>
        </select>
        
        <select id="filterCountry" class="filter-select">
            <option value="">Quốc gia</option>
            <option value="trung-quoc">Trung Quốc</option>
            <option value="han-quoc">Hàn Quốc</option>
            <option value="viet-nam">Việt Nam</option>
            <option value="thai-lan">Thái Lan</option>
            <option value="hong-kong">Hồng Kông</option>
            <option value="phap">Pháp</option>
            <option value="duc">Đức</option>
            <option value="ha-lan">Hà Lan</option>
            <option value="mexico">Mexico</option>
            <option value="thuy-dien">Thụy Điển</option>
            <option value="philippines">Philippines</option>
            <option value="dan-mach">Đan Mạch</option>
            <option value="thuy-si">Thụy Sĩ</option>
            <option value="ukraina">Ukraina</option>
            <option value="au-my">Âu Mỹ</option>
            <option value="an-do">Ấn Độ</option>
            <option value="canada">Canada</option>
            <option value="tay-ban-nha">Tây Ban Nha</option>
            <option value="indonesia">Indonesia</option>
            <option value="ba-lan">Ba Lan</option>
            <option value="malaysia">Malaysia</option>
            <option value="bo-dao-nha">Bồ Đào Nha</option>
            <option value="uae">UAE</option>
            <option value="chau-phi">Châu Phi</option>
            <option value="a-rap-xe-ut">Ả Rập Xê Út</option>
            <option value="nhat-ban">Nhật Bản</option>
            <option value="dai-loan">Đài Loan</option>
            <option value="quoc-gia-khac">Quốc Gia Khác</option>
            <option value="tho-nhi-ky">Thổ Nhĩ Kỳ</option>
            <option value="nga">Nga</option>
            <option value="uc">Úc</option>
            <option value="brazil">Brazil</option>
            <option value="y">Ý</option>
            <option value="na-uy">Na Uy</option>
            <option value="nam-phi">Nam Phi</option>
        </select>
        
        <select id="filterYear" class="filter-select">
            <option value="">Năm</option>
            <option value="2024">2024</option>
            <option value="2023">2023</option>
            <option value="2022">2022</option>
            <option value="2021">2021</option>
            <option value="2020">2020</option>
            <option value="2019">2019</option>
            <option value="2018">2018</option>
            <option value="2017">2017</option>
            <option value="2016">2016</option>
            <option value="2015">2015</option>
            <option value="2010-2014">2010-2014</option>
            <option value="2000-2009">2000-2009</option>
            <option value="1990-1999">1990-1999</option>
            <option value="1980-1989">1980-1989</option>
            <option value="1970-1979">1970-1979</option>
        </select>
        
        <div class="filter-actions">
            <button id="applyFilterBtn">Áp dụng</button>
            <button id="clearFilterBtn">Xóa lọc</button>
        </div>
    </div>
</div>

<main id="main">
    <!-- Hero Banner -->
    <div class="hero-banner">
        <img src="https://via.placeholder.com/1600x500/333/fff?text=Movie+Banner" alt="Featured Movie" style="width: 100%; height: 100%; object-fit: cover;">
        <div class="hero-content">
            <h2 class="hero-title">Avengers: Endgame</h2>
            <div class="hero-meta">
                <span><i class="fas fa-star"></i> 8.4/10</span>
                <span><i class="fas fa-clock"></i> 181 phút</span>
                <span><i class="fas fa-calendar"></i> 2019</span>
                <span><i class="fas fa-film"></i> HD</span>
            </div>
            <p class="hero-description">Sau sự kiện tàn khốc của Avengers: Infinity War, vũ trụ đang tan vỡ. Với sự giúp đỡ của các đồng minh còn lại, Avengers tập hợp lại một lần nữa để đảo ngược hành động của Thanos và khôi phục lại sự cân bằng cho vũ trụ.</p>
            <div class="hero-actions">
                <button class="btn btn-primary"><i class="fas fa-play"></i> Xem ngay</button>
                <button class="btn btn-secondary"><i class="fas fa-plus"></i> Thêm vào danh sách</button>
            </div>
        </div>
    </div>

    <!-- Category Navigation -->
    <div class="category-nav">
        <div class="category-item active">Tất cả</div>
        <div class="category-item">Hành động</div>
        <div class="category-item">Tình cảm</div>
        <div class="category-item">Hài hước</div>
        <div class="category-item">Kinh dị</div>
        <div class="category-item">Viễn tưởng</div>
        <div class="category-item">Phiêu lưu</div>
        <div class="category-item">Hoạt hình</div>
        <div class="category-item">Tài liệu</div>
        <div class="category-item">Phim bộ</div>
        <div class="category-item">Phim lẻ</div>
    </div>

    <!-- Movies Section -->
    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-fire"></i> Phim hot</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-hot"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-fist-raised"></i> Phim hành động</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-hd"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-heart"></i> Phim tình cảm</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-tc"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-ghost"></i> Phim kinh dị</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-kd"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-film"></i> Phim lẻ</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-le"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-tv"></i> Phim bộ</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-bo"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-globe-asia"></i> Phim Việt Nam</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-viet"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-flag"></i> Phim Thái Lan</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-thai"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-flag"></i> Phim Hàn Quốc</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-han"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-flag"></i> Phim Trung Quốc</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-trung"></div>

    <div class="section-header">
        <h2 class="section-title"><i class="fas fa-flag"></i> Phim Anh</h2>
        <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="movie-grid" id="movies-anh"></div>
</main>

<!-- Popup -->
<div id="popup" class="popup" role="dialog" aria-modal="true">
    <span class="close-btn" id="popupClose">×</span>
    <div class="popup-content">
        <div class="player-container" id="player">
            <div class="loading">
                <div class="spinner"></div>
            </div>
        </div>
        <div class="popup-body">
            <img id="moviePoster" src="" alt="Poster" />
            <div class="popup-info">
                <h3 id="movieTitle">Tiêu đề</h3>
                <div id="movieMeta" class="meta"></div>
                <div id="movieDesc" class="desc"></div>
                <button id="toggleDescBtn" class="toggle-btn" style="display:none">Xem thêm▼</button>

                <h4 style="margin-top:20px;">Danh sách tập</h4>
                <div id="episodeList" class="episodes"></div>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="footer-content">
        <div class="footer-column">
            <h3>Giới thiệu</h3>
            <p>LQH.DEV là trang web xem phim trực tuyến với chất lượng cao, giao diện thân thiện và nội dung phong phú được cập nhật liên tục.</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
        
        <div class="footer-column">
            <h3>Danh mục phim</h3>
            <ul class="footer-links">
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim hành động</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim tình cảm</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim hài hước</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim kinh dị</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim viễn tưởng</a></li>
            </ul>
        </div>
        
        <div class="footer-column">
            <h3>Thể loại khác</h3>
            <ul class="footer-links">
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim hoạt hình</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim tài liệu</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim chiếu rạp</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> TV Show</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Phim bộ</a></li>
            </ul>
        </div>
        
        <div class="footer-column">
            <h3>Liên kết hữu ích</h3>
            <ul class="footer-links">
                <li><a href="#"><i class="fas fa-chevron-right"></i> Trang chủ</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Giới thiệu</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Điều khoản sử dụng</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Chính sách riêng tư</a></li>
                <li><a href="#"><i class="fas fa-chevron-right"></i> Liên hệ</a></li>
            </ul>
        </div>
    </div>
    
    <div class="footer-bottom">
        <p>Copyright &copy; 2023 LQH.DEV. All rights reserved.</p>
        <p>Disclaimer: This site does not store any files on its server. All contents are provided by non-affiliated third parties.</p>
    </div>
</footer>

<script>
// Global variables
let originalMainHtml = '';

// DOM Content Loaded
document.addEventListener('DOMContentLoaded', function() {
    originalMainHtml = document.getElementById('main').innerHTML;
    initEventListeners();
    loadInitial();
});

// Initialize event listeners
function initEventListeners() {
    // Search functionality
    document.getElementById('searchBtn').addEventListener('click', handleSearch);
    document.getElementById('searchInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') handleSearch();
    });
    
    // Filter functionality
    document.getElementById('toggleFilterBtn').addEventListener('click', toggleFilterPanel);
    document.getElementById('applyFilterBtn').addEventListener('click', applyFilters);
    document.getElementById('clearFilterBtn').addEventListener('click', clearFilters);
    
    // Popup functionality
    document.getElementById('popupClose').addEventListener('click', closePopup);
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') closePopup();
    });
    
    // Close popup when clicking outside
    document.getElementById('popup').addEventListener('click', function(e) {
        if (e.target === this) closePopup();
    });
    
    // Category navigation
    const categoryItems = document.querySelectorAll('.category-item');
    categoryItems.forEach(item => {
        item.addEventListener('click', function() {
            categoryItems.forEach(i => i.classList.remove('active'));
            this.classList.add('active');
            // Here you can add filtering by category
        });
    });
}

// Toggle filter panel
function toggleFilterPanel() {
    const filterPanel = document.getElementById('filterPanel');
    if (filterPanel.style.display === 'flex') {
        filterPanel.style.display = 'none';
    } else {
        filterPanel.style.display = 'flex';
    }
}

// Handle search
function handleSearch() {
    const keyword = document.getElementById('searchInput').value.trim();
    if (!keyword) {
        alert('Vui lòng nhập từ khóa tìm kiếm.');
        return;
    }
    
    searchMovies(keyword);
}

// Apply filters
async function applyFilters() {
    const category = document.getElementById('filterCategory').value.trim();
    const country = document.getElementById('filterCountry').value.trim();
    const year = document.getElementById('filterYear').value.trim();

    if (!category && !country && !year) {
        alert('Vui lòng chọn ít nhất một bộ lọc!');
        return;
    }

    const params = new URLSearchParams({ page: 1, limit: 64 });
    if (category) params.append('category', category);
    if (country) params.append('country', country);
    if (year) params.append('year', year);

    const apiUrl = `https://phimapi.com/v1/api/danh-sach/phim-bo?${params.toString()}`;

    try {
        const res = await fetch(apiUrl);
        const data = await res.json();
        const items = data?.data?.items || [];
        const cdn = data?.data?.APP_DOMAIN_CDN_IMAGE || 'https://phimimg.com';

        const main = document.getElementById('main');
        main.innerHTML = `
            <div class="section-header">
                <h2>🎯 Kết quả lọc phim</h2>
                <button id="backHomeBtn" class="view-all">⏎ Quay về trang chủ</button>
            </div>
            <div id="filter-results" class="movie-grid"></div>
        `;
        
        renderMovies(items, 'filter-results', cdn);
        
        document.getElementById('backHomeBtn').addEventListener('click', () => {
            main.innerHTML = originalMainHtml;
            initEventListeners();
            loadInitial();
        });
        
        document.getElementById('filterPanel').style.display = 'none';
    } catch (e) {
        console.error('Lỗi lọc phim', e);
        alert('Lỗi khi lọc phim, vui lòng thử lại.');
    }
}

// Clear filters
function clearFilters() {
    document.getElementById('filterCategory').value = '';
    document.getElementById('filterCountry').value = '';
    document.getElementById('filterYear').value = '';
}

/** ===== helper build image URL (use CDN domain if path relative) ===== **/
function buildImageUrl(path, cdnDomain = "https://phimimg.com") {
    if (!path) return "https://via.placeholder.com/300x450/333/fff?text=No+Image";
    if (path.startsWith("http")) return path;
    // remove trailing/slash issues then join
    return cdnDomain.replace(/\/+$/, "") + "/" + path.replace(/^\/+/, "");
}

/** ===== render movies into containerId ===== **/
function renderMovies(movies, containerId, cdnDomain = "https://phimimg.com") {
    const el = document.getElementById(containerId);
    if (!el) return;
    
    if (movies.length === 0) {
        el.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--muted);">Không tìm thấy phim nào.</p>';
        return;
    }
    
    el.innerHTML = movies.map(m => {
        const imgPath = m.poster_url || m.thumb_url || "";
        const img = buildImageUrl(imgPath, cdnDomain);
        const safeName = (m.name || m.origin_name || "No title").replace(/"/g, "&quot;");
        const rating = m.rating || (Math.random() * 5 + 5).toFixed(1); // Fallback random rating 5-10
        const year = m.year || "N/A";
        
        return `
        <div class="movie-card" data-slug="${m.slug || ''}" onclick="getMovieDetail('${m.slug}')">
            <img src="${img}" alt="${safeName}" class="movie-poster" loading="lazy">
            <div class="movie-info">
                <h3 class="movie-title">${safeName}</h3>
                <div class="movie-meta">
                    <span class="movie-rating"><i class="fas fa-star"></i> ${rating}</span>
                    <span class="movie-year">${year}</span>
                </div>
            </div>
        </div>`;
    }).join("");
}

/** ===== Load initial sections ===== **/
async function loadInitial() {
    try {
        // 1. Hot list (from danh-sach/phim-moi-cap-nhat)
        const r = await fetch("https://phimapi.com/danh-sach/phim-moi-cap-nhat?page=1");
        const d = await r.json();
        const items = d?.items || [];
        renderMovies(items.slice(0,10), "movies-hot", d?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com");
    } catch(e){ console.error("hot list error",e); }

    // 2. By countries and categories
    await Promise.allSettled([
        loadMoviesByCountry("han-quoc", "movies-han"),
        loadMoviesByCountry("trung-quoc", "movies-trung"),
        loadMoviesByCountry("viet-nam", "movies-viet"),
        loadMoviesByCountry("thai-lan", "movies-thai"),
        loadMoviesByCountry("anh", "movies-anh"),
        loadMoviesBytheloai("hanh-dong", "movies-hd"),
        loadMoviesBytheloai("tinh-cam", "movies-tc"),
        loadMoviesBytheloai("kinh-di", "movies-kd"),
        loadMoviesBylebo("phim-bo", "movies-bo"),
        loadMoviesBylebo("phim-le", "movies-le")
    ]);
}

/** load movies by country slug into container */
async function loadMoviesByCountry(slug, containerId) {
    try {
        const r = await fetch(`https://phimapi.com/v1/api/quoc-gia/${slug}?page=1&limit=20`);
        const d = await r.json();
        const items = d?.data?.items || [];
        const cdn = d?.data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";
        renderMovies(items, containerId, cdn);
    } catch(e){ console.error("country load error", e); }
}

async function loadMoviesBytheloai(slug, containerId) {
    try {
        const r = await fetch(`https://phimapi.com/v1/api/the-loai/${slug}?page=1&limit=20`);
        const d = await r.json();
        const items = d?.data?.items || [];
        const cdn = d?.data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";
        renderMovies(items, containerId, cdn);
    } catch(e){ console.error("thể loại load error", e); }
}

async function loadMoviesBylebo(slug, containerId) {
    try {
        const r = await fetch(`https://phimapi.com/v1/api/danh-sach/${slug}?page=1&limit=20`);
        const d = await r.json();
        const items = d?.data?.items || [];
        const cdn = d?.data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";
        renderMovies(items, containerId, cdn);
    } catch(e){ console.error("thể loại load error", e); }
}

/** ===== search: show results + suggested section ===== **/
async function searchMovies(keyword) {
    if (!keyword) return;
    
    try {
        const r = await fetch(`https://phimapi.com/v1/api/tim-kiem?keyword=${encodeURIComponent(keyword)}&limit=64`);
        const d = await r.json();
        const items = d?.data?.items || [];
        const cdn = d?.data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";

        // create a search results section
        const main = document.getElementById("main");
        main.innerHTML = `
            <div class="section-header">
                <h2>Kết quả tìm kiếm: "${escapeHtml(keyword)}"</h2>
                <button id="backHomeBtn" class="view-all">⏎ Quay về trang chủ</button>
            </div>
            <div id="search-results" class="movie-grid"></div>
            <div class="section-header">
                <h2>🎯 Gợi ý cho bạn</h2>
            </div>
            <div id="suggested-movies" class="movie-grid"></div>
        `;

        renderMovies(items, "search-results", cdn);

        // suggested = hot
        const hotRes = await fetch("https://phimapi.com/danh-sach/phim-moi-cap-nhat?page=1");
        const hotData = await hotRes.json();
        const hotItems = hotData?.items?.slice(0,10) || [];
        const hotCdn = hotData?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";
        renderMovies(hotItems, "suggested-movies", hotCdn);

        // add event listener for back button
        document.getElementById("backHomeBtn").addEventListener("click", () => { 
            main.innerHTML = originalMainHtml; 
            initEventListeners();
            loadInitial(); 
        });
    } catch(e){
        console.error("search error", e);
        alert("Lỗi tìm kiếm phim");
    }
}

/** escape for display */
function escapeHtml(s){ 
    return String(s).replace(/[&<>"']/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;" }[m])); 
}

/** ===== popup detail ===== **/
const popup = document.getElementById("popup");
const popupClose = document.getElementById("popupClose");

async function getMovieDetail(slug) {
    if (!slug) return;
    
    openPopup();
    
    try {
        const r = await fetch(`https://phimapi.com/phim/${slug}`);
        const d = await r.json();
        if (!d?.status) { 
            alert("Không tìm thấy thông tin phim"); 
            closePopup();
            return; 
        }

        const movie = d.movie || {};
        const episodes = d.episodes?.[0]?.server_data || [];
        const cdnDomain = d?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";

        // update title/meta
        if (movie.titleHead) document.title = movie.titleHead + " | Film LQH.DEV";
        if (movie.descriptionHead) {
            let meta = document.querySelector('meta[name="description"]');
            if (!meta) { 
                meta = document.createElement("meta"); 
                meta.name = "description"; 
                document.head.appendChild(meta); 
            }
            meta.content = movie.descriptionHead;
        }

        // Build image URL
        const posterUrl = buildImageUrl(movie.poster_url || movie.thumb_url, cdnDomain);
        document.getElementById("moviePoster").src = posterUrl;

        document.getElementById("movieTitle").innerText = `${movie.name || movie.origin_name || "Không tên"} ${movie.year ? "(" + movie.year + ")" : ""}`;

        const genres = (movie.category?.map(c=>c.name).join(", ")) || "Không rõ";
        const countries = (movie.country?.map(c=>c.name).join(", ")) || "Không rõ";
        document.getElementById("movieMeta").innerHTML = `
            <span>⏳ ${movie.time||'N/A'}</span>
            <span>🎬 ${movie.quality||'N/A'}</span>
            <span>🎭 ${genres}</span>
            <span>🌐 ${countries}</span>
        `;

        // desc toggle
        const descEl = document.getElementById("movieDesc");
        const toggleBtn = document.getElementById("toggleDescBtn");
        const descText = movie.content || "Không có mô tả cho phim này.";
        descEl.textContent = descText;
        descEl.classList.remove("expanded");
        if (descText.length > 220) {
            toggleBtn.style.display = "inline-block";
            toggleBtn.textContent = "Xem thêm▼";
            toggleBtn.onclick = () => {
                const expanded = descEl.classList.toggle("expanded");
                toggleBtn.textContent = expanded ? "Thu gọn▲" : "Xem thêm▼";
            };
        } else {
            toggleBtn.style.display = "none";
        }

        // episodes
        const epList = document.getElementById("episodeList");
        if (episodes.length > 0) {
            epList.innerHTML = episodes.map((ep,i)=> {
                const url = ep.link_embed || ep.link || ep.file || "#";
                return `<button onclick="playEpisode('${url}', this)">Tập ${i+1}</button>`;
            }).join("");
            
            // Auto play first episode
            if (episodes[0].link_embed || episodes[0].link || episodes[0].file) {
                const firstEp = epList.querySelector('button');
                firstEp.classList.add('active');
                playEpisode(episodes[0].link_embed || episodes[0].link || episodes[0].file, firstEp);
            }
        } else {
            epList.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--muted);">Không có tập nào.</p>';
        }

    } catch(e){
        console.error("detail error", e);
        alert("Lỗi tải chi tiết phim");
        closePopup();
    }
}

function playEpisode(url, element){
    if(!url || url === "#") return alert("Link không hợp lệ");
    
    // Remove active class from all buttons and add to clicked one
    const buttons = document.querySelectorAll('#episodeList button');
    buttons.forEach(btn => btn.classList.remove('active'));
    element.classList.add('active');
    
    // embed in iframe
    const player = document.getElementById("player");
    player.innerHTML = `<iframe src="${url}" allowfullscreen></iframe>`;
    
    // scroll popup content to top of player for better UX
    setTimeout(() => {
        player.scrollIntoView({behavior: "smooth", block: "start"});
    }, 100);
}

function openPopup(){
    document.body.style.overflow = 'hidden';
    popup.style.display = "flex";
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function closePopup(){
    document.body.style.overflow = 'auto';
    document.getElementById("player").innerHTML = "";
    popup.style.display = "none";
    document.title = "Film LQH.DEV - Xem phim online chất lượng cao";
}
</script>
</body>
</html>
