<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Film LQH.DEV - Xem Phim Mới HD Online Vietsub</title>
    <meta name="description" content="Xem phim online miễn phí, chất lượng cao với dữ liệu từ KKPhim.VIP. Phim mới cập nhật liên tục, hỗ trợ Vietsub, Lồng Tiếng, Thuyết Minh." />
    <link rel="preconnect" href="https://phimapi.com">
    <link rel="preconnect" href="https://phimimg.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0a0a0a;
            --panel: #1a1a1a;
            --accent: #e50914;
            --accent-hover: #ff0a16;
            --muted: #aaa;
            --text: #fff;
            --card-radius: 8px;
            --transition: all 0.3s ease;
            --header-height: 70px;
            --section-spacing: 30px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            padding-top: var(--header-height);
        }

        /* Header Styles */
        header {
            background: rgba(20, 20, 20, 0.95);
            padding: 0 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #2a2a2a;
        }

        #logo {
            display: flex;
            align-items: center;
        }

        #logo img {
            height: 40px;
            transition: var(--transition);
        }

        #logo img:hover {
            transform: scale(1.05);
        }

        #searchContainer {
            flex: 1;
            position: relative;
            max-width: 600px;
            margin: 0 20px;
        }

        #searchInput {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            border: none;
            background: #222;
            color: var(--text);
            font-size: 16px;
            transition: var(--transition);
            outline: none;
            padding-right: 50px;
        }

        #searchInput:focus {
            background: #2a2a2a;
            box-shadow: 0 0 0 2px var(--accent);
        }

        #searchBtn {
            position: absolute;
            right: 5px;
            top: 5px;
            padding: 7px 16px;
            border-radius: 30px;
            border: none;
            background: var(--accent);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        #searchBtn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .nav-icon {
            font-size: 20px;
            color: var(--text);
            transition: var(--transition);
            cursor: pointer;
        }

        .nav-icon:hover {
            color: var(--accent);
        }

        /* Filter Panel */
        .filter-container {
            padding: 12px 20px;
            background: #141414;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        #toggleFilterBtn {
            padding: 10px 20px;
            border: none;
            border-radius: 30px;
            background: var(--accent);
            color: white;
            cursor: pointer;
            font-weight: 600;
            width: 140px;
            transition: var(--transition);
        }

        #toggleFilterBtn:hover {
            background: var(--accent-hover);
        }

        #filterPanel {
            display: none;
            gap: 12px;
            flex-wrap: wrap;
        }

        #filterPanel select,
        #applyFilterBtn {
            padding: 8px;
            border-radius: 6px;
            background: #222;
            color: var(--text);
            border: none;
            min-width: 140px;
            font-size: 14px;
        }

        #applyFilterBtn {
            background: var(--accent);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        #applyFilterBtn:hover {
            background: var(--accent-hover);
        }

        /* Hero Banner */
        .hero-banner {
            height: 500px;
            position: relative;
            overflow: hidden;
            border-radius: var(--card-radius);
            margin: 20px 0 var(--section-spacing);
        }

        .hero-banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 30px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            z-index: 2;
        }

        .hero-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .hero-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .hero-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .hero-description {
            max-width: 600px;
            margin-bottom: 20px;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .hero-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 30px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Category Navigation */
        .category-nav {
            display: flex;
            overflow-x: auto;
            gap: 15px;
            padding: 15px 0;
            margin-bottom: var(--section-spacing);
            scrollbar-width: none;
        }

        .category-nav::-webkit-scrollbar {
            display: none;
        }

        .category-item {
            padding: 8px 20px;
            background: var(--panel);
            border-radius: 30px;
            white-space: nowrap;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .category-item:hover,
        .category-item.active {
            background: var(--accent);
            color: white;
        }

        /* Main Content */
        main {
            padding: 0 20px 80px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: var(--section-spacing) 0 20px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .view-all {
            color: var(--accent);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .view-all:hover {
            text-decoration: underline;
        }

        .movie-row {
            display: flex;
            gap: 12px;
            padding: 0 0 18px;
            overflow-x: auto;
            scroll-behavior: smooth;
        }

        .movie {
            width: 150px;
            background: var(--panel);
            border-radius: var(--card-radius);
            overflow: hidden;
            cursor: pointer;
            flex-shrink: 0;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .movie:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .movie img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            display: block;
            loading: lazy;
        }

        .movie .title {
            padding: 8px;
            font-size: 14px;
            height: 40px;
            overflow: hidden;
            color: #eee;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        /* Popup Styles */
        .popup {
            position: fixed;
            inset: 0;
            display: none;
            justify-content: center;
            align-items: flex-start;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            overflow-y: auto;
            padding: 40px 20px;
            animation: fadeIn 0.3s ease;
        }

        .popup-content {
            width: 100%;
            max-width: 1000px;
            background: transparent;
            display: flex;
            flex-direction: column;
            animation: scaleIn 0.3s ease;
        }

        .player-container {
            width: 100%;
            background: black;
            border-radius: var(--card-radius);
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            aspect-ratio: 16/9;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: 0;
            display: block;
        }

        .popup-body {
            display: flex;
            gap: 24px;
            padding: 24px;
            flex-wrap: wrap;
            background: linear-gradient(rgba(0, 0, 0, 0.9), rgba(30, 30, 30, 0.8));
            border-radius: 0 0 var(--card-radius) var(--card-radius);
            backdrop-filter: blur(10px);
        }

        .popup-body img {
            width: 280px;
            border-radius: var(--card-radius);
            object-fit: cover;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .popup-info {
            flex: 1;
            min-width: 300px;
        }

        .popup-info h3 {
            margin: 0 0 12px;
            font-size: 1.8rem;
            line-height: 1.3;
        }

        .popup-meta {
            color: var(--muted);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 16px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .popup-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .desc {
            color: #ddd;
            margin-top: 16px;
            font-size: 0.95rem;
            line-height: 1.6;
            max-height: 120px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .desc.expanded {
            max-height: 1000px;
        }

        .toggle-btn {
            margin-top: 12px;
            padding: 8px 16px;
            background: #2a2a2a;
            border-radius: 6px;
            border: none;
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .toggle-btn:hover {
            background: #333;
        }

        .episodes {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
        }

        .episodes button {
            padding: 10px;
            background: #222;
            border: none;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .episodes button:hover {
            background: var(--accent);
        }

        .close-btn {
            position: fixed;
            right: 24px;
            top: 24px;
            font-size: 32px;
            color: white;
            cursor: pointer;
            z-index: 2100;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            transition: var(--transition);
        }

        .close-btn:hover {
            background: var(--accent);
            transform: rotate(90deg);
        }

        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--accent);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        /* Back to top button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 999;
            box-shadow: 0 4px 12px rgba(229, 9, 20, 0.3);
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: var(--accent-hover);
            transform: translateY(-5px);
        }

        /* Footer Styles */
        footer {
            background: #111;
            color: var(--muted);
            padding: 50px 20px 30px;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .footer-column h3 {
            color: var(--text);
            margin-bottom: 20px;
            font-size: 1.2rem;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--accent);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: var(--muted);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--accent);
        }

        .footer-bottom {
            max-width: 1200px;
            margin: 40px auto 0;
            padding-top: 20px;
            border-top: 1px solid #333;
            text-align: center;
            font-size: 0.9rem;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #222;
            color: var(--text);
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }

        .telegram-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: #0088cc;
            border-radius: 6px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .telegram-link:hover {
            background: #00aaff;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.95);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Responsive Styles */
        @media (max-width: 1200px) {
            .movie-row {
                gap: 15px;
            }
        }

        @media (max-width: 992px) {
            .hero-banner {
                height: 400px;
            }

            .hero-title {
                font-size: 2rem;
            }

            .popup-body {
                flex-direction: column;
                align-items: center;
            }

            .popup-body img {
                width: 220px;
            }

            .player-container,
            iframe {
                height: 400px;
            }
        }

        @media (max-width: 768px) {
            :root {
                --header-height: 60px;
            }

            header {
                padding: 0 15px;
            }

            #searchContainer {
                margin: 0 10px;
            }

            .hero-banner {
                height: 350px;
            }

            .hero-title {
                font-size: 1.8rem;
            }

            .hero-content {
                padding: 20px;
            }

            .movie {
                width: 130px;
            }

            .movie img {
                height: 200px;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .nav-menu {
                display: none;
            }
        }

        @media (max-width: 576px) {
            .hero-banner {
                height: 300px;
            }

            .hero-title {
                font-size: 1.5rem;
            }

            .hero-description {
                font-size: 0.9rem;
            }

            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            .movie {
                width: 130px;
            }

            .movie img {
                height: 180px;
            }

            .section-title {
                font-size: 1.3rem;
            }

            .player-container,
            iframe {
                height: 250px;
            }

            .popup-body img {
                width: 180px;
            }

            .popup-info h3 {
                font-size: 1.5rem;
            }

            .episodes {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }

            .back-to-top {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div id="logo">
            <img src="https://i.imgur.com/NEqqdDt.png" alt="Film LQH.DEV Logo" />
        </div>
        <div id="searchContainer">
            <input id="searchInput" placeholder="Tìm kiếm phim..." />
            <button id="searchBtn"><i class="fas fa-search"></i></button>
        </div>
        <div class="nav-menu">
            <a href="#" class="nav-icon"><i class="fas fa-heart"></i></a>
            <a href="#" class="nav-icon"><i class="fas fa-bell"></i></a>
            <a href="#" class="nav-icon"><i class="fas fa-user"></i></a>
        </div>
    </header>

    <div class="filter-container">
        <button id="toggleFilterBtn">Lọc phim 🎬</button>
        <div id="filterPanel">
            <select id="filterCategory">
                <option value="">Thể loại</option>
                <option value="hanh-dong">Hành động</option>
                <option value="tinh-cam">Tình cảm</option>
                <option value="co-trang">Cổ trang</option>
                <option value="kinh-di">Kinh dị</option>
                <option value="chien-tranh">Chiến tranh</option>
                <option value="lich-su">Lịch sử</option>
                <option value="tre-em">Trẻ em</option>
                <option value="vien-tuong">Viễn tưởng</option>
                <option value="tai-lieu">Tài liệu</option>
                <option value="bi-an">Bí ẩn</option>
                <option value="phim-18">Phim 18+</option>
                <option value="tam-ly">Tâm lý</option>
                <option value="the-thao">Thể thao</option>
                <option value="phieu-luu">Phiêu lưu</option>
                <option value="am-nhac">Âm nhạc</option>
                <option value="gia-dinh">Gia đình</option>
                <option value="hoc-duong">Học đường</option>
                <option value="hai-huoc">Hài hước</option>
                <option value="hinh-su">Hình sự</option>
                <option value="vo-thuat">Võ thuật</option>
                <option value="khoa-hoc">Khoa học</option>
                <option value="than-thoai">Thần thoại</option>
                <option value="chinh-kich">Chính kịch</option>
                <option value="kinh-dien">Kinh điển</option>
                <option value="mien-tay">Miền tây</option>
            </select>
            <select id="filterCountry">
                <option value="">Quốc gia</option>
                <option value="trung-quoc">Trung Quốc</option>
                <option value="han-quoc">Hàn Quốc</option>
                <option value="viet-nam">Việt Nam</option>
                <option value="thai-lan">Thái Lan</option>
                <option value="hong-kong">Hồng Kông</option>
                <option value="phap">Pháp</option>
                <option value="duc">Đức</option>
                <option value="ha-lan">Hà Lan</option>
                <option value="mexico">Mexico</option>
                <option value="thuy-dien">Thụy Điển</option>
                <option value="philippines">Philippines</option>
                <option value="dan-mach">Đan Mạch</option>
                <option value="thuy-si">Thụy Sĩ</option>
                <option value="ukraina">Ukraina</option>
                <option value="au-my">Âu Mỹ</option>
                <option value="an-do">Ấn Độ</option>
                <option value="canada">Canada</option>
                <option value="tay-ban-nha">Tây Ban Nha</option>
                <option value="indonesia">Indonesia</option>
                <option value="ba-lan">Ba Lan</option>
                <option value="malaysia">Malaysia</option>
                <option value="bo-dao-nha">Bồ Đào Nha</option>
                <option value="uae">UAE</option>
                <option value="chau-phi">Châu Phi</option>
                <option value="a-rap-xe-ut">Ả Rập Xê Út</option>
                <option value="nhat-ban">Nhật Bản</option>
                <option value="dai-loan">Đài Loan</option>
                <option value="quoc-gia-khac">Quốc Gia Khác</option>
                <option value="tho-nhi-ky">Thổ Nhĩ Kỳ</option>
                <option value="nga">Nga</option>
                <option value="uc">Úc</option>
                <option value="brazil">Brazil</option>
                <option value="y">Ý</option>
                <option value="na-uy">Na Uy</option>
                <option value="nam-phi">Nam Phi</option>
            </select>
            <select id="filterYear">
                <option value="">Năm</option>
                <option value="1970">1970</option>
                <option value="1971">1971</option>
                <option value="1972">1972</option>
                <option value="1973">1973</option>
                <option value="1974">1974</option>
                <option value="1975">1975</option>
                <option value="1976">1976</option>
                <option value="1977">1977</option>
                <option value="1978">1978</option>
                <option value="1979">1979</option>
                <option value="1980">1980</option>
                <option value="1981">1981</option>
                <option value="1982">1982</option>
                <option value="1983">1983</option>
                <option value="1984">1984</option>
                <option value="1985">1985</option>
                <option value="1986">1986</option>
                <option value="1987">1987</option>
                <option value="1988">1988</option>
                <option value="1989">1989</option>
                <option value="1990">1990</option>
                <option value="1991">1991</option>
                <option value="1992">1992</option>
                <option value="1993">1993</option>
                <option value="1994">1994</option>
                <option value="1995">1995</option>
                <option value="1996">1996</option>
                <option value="1997">1997</option>
                <option value="1998">1998</option>
                <option value="1999">1999</option>
                <option value="2000">2000</option>
                <option value="2001">2001</option>
                <option value="2002">2002</option>
                <option value="2003">2003</option>
                <option value="2004">2004</option>
                <option value="2005">2005</option>
                <option value="2006">2006</option>
                <option value="2007">2007</option>
                <option value="2008">2008</option>
                <option value="2009">2009</option>
                <option value="2010">2010</option>
                <option value="2011">2011</option>
                <option value="2012">2012</option>
                <option value="2013">2013</option>
                <option value="2014">2014</option>
                <option value="2015">2015</option>
                <option value="2016">2016</option>
                <option value="2017">2017</option>
                <option value="2018">2018</option>
                <option value="2019">2019</option>
                <option value="2020">2020</option>
                <option value="2021">2021</option>
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024">2024</option>
                <option value="2025">2025</option>
            </select>
            <button id="applyFilterBtn">Áp dụng</button>
        </div>
    </div>

    <main id="main">
        <!-- Hero Banner -->
        <div class="hero-banner" id="heroBanner">
            <img src="https://via.placeholder.com/1600x500/333/fff?text=Phim+Noi+Bat" alt="Featured Movie">
            <div class="hero-content">
                <h2 class="hero-title">Phim nổi bật</h2>
                <div class="hero-meta">
                    <span><i class="fas fa-star"></i> 8.0/10</span>
                    <span><i class="fas fa-clock"></i> N/A</span>
                    <span><i class="fas fa-calendar"></i> N/A</span>
                    <span><i class="fas fa-film"></i> N/A</span>
                </div>
                <p class="hero-description">Không có mô tả cho phim này.</p>
                <div class="hero-actions">
                    <button class="btn btn-primary" onclick="getMovieDetail('')"><i class="fas fa-play"></i> Xem ngay</button>
                    <button class="btn btn-secondary"><i class="fas fa-plus"></i> Thêm vào danh sách</button>
                </div>
            </div>
        </div>

        <!-- Category Navigation -->
        <div class="category-nav">
            <div class="category-item active" data-filter="all">Tất cả</div>
            <div class="category-item" data-filter="category" data-value="hanh-dong">Hành động</div>
            <div class="category-item" data-filter="category" data-value="tinh-cam">Tình cảm</div>
            <div class="category-item" data-filter="category" data-value="hai-huoc">Hài hước</div>
            <div class="category-item" data-filter="category" data-value="kinh-di">Kinh dị</div>
            <div class="category-item" data-filter="category" data-value="vien-tuong">Viễn tưởng</div>
            <div class="category-item" data-filter="category" data-value="phieu-luu">Phiêu lưu</div>
            <div class="category-item" data-filter="category" data-value="hoat-hinh">Hoạt hình</div>
            <div class="category-item" data-filter="category" data-value="tai-lieu">Tài liệu</div>
            <div class="category-item" data-filter="type" data-value="phim-bo">Phim bộ</div>
            <div class="category-item" data-filter="type" data-value="phim-le">Phim lẻ</div>
            <div class="category-item" data-filter="country" data-value="viet-nam">Việt Nam</div>
            <div class="category-item" data-filter="country" data-value="han-quoc">Hàn Quốc</div>
            <div class="category-item" data-filter="country" data-value="trung-quoc">Trung Quốc</div>
            <div class="category-item" data-filter="country" data-value="thai-lan">Thái Lan</div>
        </div>

        <!-- Movies Sections -->
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-fire"></i> Phim hot</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-hot"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-fist-raised"></i> Phim hành động</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-hd"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-heart"></i> Phim tình cảm</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-tc"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-ghost"></i> Phim kinh dị</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-kd"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-film"></i> Phim lẻ</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-le"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-tv"></i> Phim bộ</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-bo"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-globe-asia"></i> Phim Việt Nam</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-viet"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-umbrella-beach"></i> Phim Thái Lan</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-thai"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-fan"></i> Phim Hàn Quốc</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-han"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-dragon"></i> Phim Trung Quốc</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-trung"></div>

        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-hat-cowboy"></i> Phim Âu Mỹ</h2>
            <a href="#" class="view-all">Xem tất cả <i class="fas fa-chevron-right"></i></a>
        </div>
        <div class="movie-row" id="movies-anh"></div>
    </main>

    <div class="back-to-top" id="backToTop"><i class="fas fa-chevron-up"></i></div>

    <!-- Popup -->
    <div id="popup" class="popup" role="dialog" aria-modal="true">
        <span class="close-btn" id="popupClose">×</span>
        <div class="popup-content">
            <div class="player-container" id="player">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
            <div class="popup-body">
                <img id="moviePoster" src="" alt="Poster" />
                <div class="popup-info">
                    <h3 id="movieTitle">Tiêu đề</h3>
                    <div id="movieMeta" class="popup-meta"></div>
                    <div id="movieDesc" class="desc"></div>
                    <button id="toggleDescBtn" class="toggle-btn" style="display:none">Xem thêm▼</button>
                    <h4 style="margin-top:20px;">Danh sách tập</h4>
                    <div id="episodeList" class="episodes"></div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>Giới thiệu</h3>
                <p>Film LQH.DEV cung cấp thông tin phim hot, cập nhật nhanh các thể loại phim đa dạng, sử dụng API từ KKPhim.VIP. Dữ liệu phim Vietsub, Lồng Tiếng, Thuyết Minh được cung cấp miễn phí và vĩnh viễn.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="https://t.me/phimnguon" class="telegram-link"><i class="fab fa-telegram-plane"></i> Tham gia Telegram</a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Danh mục phim</h3>
                <ul class="footer-links">
                    <li><a href="#" data-filter="category" data-value="hanh-dong"><i class="fas fa-chevron-right"></i> Phim hành động</a></li>
                    <li><a href="#" data-filter="category" data-value="tinh-cam"><i class="fas fa-chevron-right"></i> Phim tình cảm</a></li>
                    <li><a href="#" data-filter="category" data-value="kinh-di"><i class="fas fa-chevron-right"></i> Phim kinh dị</a></li>
                    <li><a href="#" data-filter="category" data-value="phieu-luu"><i class="fas fa-chevron-right"></i> Phim phiêu lưu</a></li>
                    <li><a href="#" data-filter="category" data-value="vien-tuong"><i class="fas fa-chevron-right"></i> Phim viễn tưởng</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Quốc gia</h3>
                <ul class="footer-links">
                    <li><a href="#" data-filter="country" data-value="viet-nam"><i class="fas fa-chevron-right"></i> Phim Việt Nam</a></li>
                    <li><a href="#" data-filter="country" data-value="han-quoc"><i class="fas fa-chevron-right"></i> Phim Hàn Quốc</a></li>
                    <li><a href="#" data-filter="country" data-value="trung-quoc"><i class="fas fa-chevron-right"></i> Phim Trung Quốc</a></li>
                    <li><a href="#" data-filter="country" data-value="thai-lan"><i class="fas fa-chevron-right"></i> Phim Thái Lan</a></li>
                    <li><a href="#" data-filter="country" data-value="au-my"><i class="fas fa-chevron-right"></i> Phim Âu Mỹ</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Liên kết hữu ích</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Trang chủ</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Giới thiệu</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Điều khoản sử dụng</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Chính sách riêng tư</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Liên hệ</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Copyright &copy; 2025 Film LQH.DEV. All rights reserved.</p>
            <p>Disclaimer: This site does not store any files on its server. All contents are provided by non-affiliated third parties, particularly from KKPhim.VIP.</p>
        </div>
    </footer>

    <script>
        // Sample movie data for fallback
        const sampleMovies = [
            { 
                name: "Avengers: Endgame", 
                slug: "avengers-endgame",
                poster_url: "https://via.placeholder.com/300x440/333/fff?text=Avengers", 
                year: 2019 
            },
            { 
                name: "The Dark Knight", 
                slug: "the-dark-knight",
                poster_url: "https://via.placeholder.com/300x440/333/fff?text=Dark+Knight", 
                year: 2008 
            },
            { 
                name: "Inception", 
                slug: "inception",
                poster_url: "https://via.placeholder.com/300x440/333/fff?text=Inception", 
                year: 2010 
            },
            { 
                name: "Parasite", 
                slug: "parasite",
                poster_url: "https://via.placeholder.com/300x440/333/fff?text=Parasite", 
                year: 2019 
            },
            { 
                name: "The Shawshank Redemption", 
                slug: "the-shawshank-redemption",
                poster_url: "https://via.placeholder.com/300x440/333/fff?text=Shawshank", 
                year: 1994 
            },
            { 
                name: "Pulp Fiction", 
                slug: "pulp-fiction",
                poster_url: "https://via.placeholder.com/300x440/333/fff?text=Pulp+Fiction", 
                year: 1994 
            },
            { 
                name: "The Godfather", 
                slug: "the-godfather",
                poster_url: "https://via.placeholder.com/300x440/333/fff?text=Godfather", 
                year: 1972 
            },
            { 
                name: "Fight Club", 
                slug: "fight-club",
                poster_url: "https://via.placeholder.com/300x440/333/fff?text=Fight+Club", 
                year: 1999 
            }
        ];

        // Toggle filter panel
        const toggleFilterBtn = document.getElementById("toggleFilterBtn");
        const filterPanel = document.getElementById("filterPanel");
        const applyFilterBtn = document.getElementById("applyFilterBtn");

        if (toggleFilterBtn && filterPanel) {
            toggleFilterBtn.addEventListener("click", () => {
                filterPanel.style.display = filterPanel.style.display === "flex" ? "none" : "flex";
            });
        }

        // Apply filter
        if (applyFilterBtn) {
            applyFilterBtn.addEventListener("click", async () => {
                const category = document.getElementById("filterCategory")?.value.trim() || "";
                const country = document.getElementById("filterCountry")?.value.trim() || "";
                const year = document.getElementById("filterYear")?.value.trim() || "";

                if (!category && !country && !year) {
                    alert("Vui lòng chọn ít nhất một bộ lọc!");
                    return;
                }

                const params = new URLSearchParams({ page: 1, limit: 64 });
                if (category) params.append("category", category);
                if (country) params.append("country", country);
                if (year) params.append("year", year);

                const apiUrl = `https://phimapi.com/v1/api/danh-sach/phim-bo?${params.toString()}`;
                const main = document.getElementById("main");

                if (!main) {
                    console.error("Main element not found");
                    return;
                }

                try {
                    const res = await fetch(apiUrl);
                    const data = await res.json();
                    const items = data?.data?.items || sampleMovies; // Fallback to sample data
                    const cdn = data?.data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";

                    main.innerHTML = `
                        <h2 class="section-title">🎯 Kết quả lọc phim</h2>
                        <div id="filter-results" class="movie-row"></div>
                        <button id="backHomeBtn" style="margin:12px;padding:8px 12px;background:#222;border:none;color:#fff;border-radius:6px;cursor:pointer;">⏎ Quay về trang chủ</button>
                    `;
                    renderMovies(items, "filter-results", cdn);

                    const backHomeBtn = document.getElementById("backHomeBtn");
                    if (backHomeBtn) {
                        backHomeBtn.onclick = () => {
                            if (main) {
                                main.innerHTML = originalMainHtml;
                                loadInitial();
                            }
                        };
                    }

                    filterPanel.style.display = "none";
                } catch (e) {
                    console.error("Lỗi lọc phim", e);
                    alert("Lỗi khi lọc phim, vui lòng thử lại.");
                    renderMovies(sampleMovies, "filter-results"); // Fallback to sample data
                }
            });
        }

        // Helper: Build image URL
        function buildImageUrl(path, cdnDomain = "https://phimimg.com") {
            if (!path) return "https://via.placeholder.com/300x440?text=No+Image";
            if (path.startsWith("http")) return path;
            return cdnDomain.replace(/\/+$/, "") + "/" + path.replace(/^\/+/, "");
        }

        // Render movies
        function renderMovies(movies, containerId, cdnDomain = "https://phimimg.com") {
            const el = document.getElementById(containerId);
            if (!el) {
                console.error(`Container #${containerId} not found`);
                return;
            }
            el.innerHTML = movies.map(m => {
                const imgPath = m.poster_url || m.thumb_url || "";
                const img = buildImageUrl(imgPath, cdnDomain);
                const safeName = (m.name || m.origin_name || "No title").replace(/"/g, "&quot;");
                return `<div class="movie" data-slug="${m.slug || ''}" onclick="getMovieDetail('${m.slug}')">
                    <img src="${img}" alt="${safeName}" loading="lazy">
                    <div class="title">${safeName}</div>
                </div>`;
            }).join("");
        }

        // Load initial sections
        async function loadInitial() {
            const sections = [
                { id: "movies-hot", url: "https://phimapi.com/danh-sach/phim-moi-cap-nhat?page=1", slice: 10 },
                { id: "movies-han", url: "https://phimapi.com/v1/api/quoc-gia/han-quoc?page=1&limit=64" },
                { id: "movies-trung", url: "https://phimapi.com/v1/api/quoc-gia/trung-quoc?page=1&limit=64" },
                { id: "movies-viet", url: "https://phimapi.com/v1/api/quoc-gia/viet-nam?page=1&limit=64" },
                { id: "movies-thai", url: "https://phimapi.com/v1/api/quoc-gia/thai-lan?page=1&limit=64" },
                { id: "movies-anh", url: "https://phimapi.com/v1/api/quoc-gia/au-my?page=1&limit=64" },
                { id: "movies-hd", url: "https://phimapi.com/v1/api/the-loai/hanh-dong?page=1&limit=64" },
                { id: "movies-tc", url: "https://phimapi.com/v1/api/the-loai/tinh-cam?page=1&limit=64" },
                { id: "movies-kd", url: "https://phimapi.com/v1/api/the-loai/kinh-di?page=1&limit=64" },
                { id: "movies-bo", url: "https://phimapi.com/v1/api/danh-sach/phim-bo?page=1&limit=64" },
                { id: "movies-le", url: "https://phimapi.com/v1/api/danh-sach/phim-le?page=1&limit=64" }
            ];

            for (const section of sections) {
                const container = document.getElementById(section.id);
                if (!container) {
                    console.warn(`Container #${section.id} not found`);
                    continue;
                }
                try {
                    const res = await fetch(section.url);
                    const data = await res.json();
                    const items = (section.slice ? data?.items?.slice(0, section.slice) : data?.data?.items) || sampleMovies;
                    const cdn = data?.data?.APP_DOMAIN_CDN_IMAGE || data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";
                    renderMovies(items, section.id, cdn);
                } catch (e) {
                    console.error(`Error loading ${section.id}`, e);
                    renderMovies(sampleMovies, section.id); // Fallback to sample data
                }
            }
        }

        // Search movies
        async function searchMovies(keyword) {
            if (!keyword) {
                alert("Vui lòng nhập từ khóa tìm kiếm.");
                return;
            }
            const main = document.getElementById("main");
            if (!main) {
                console.error("Main element not found");
                return;
            }
            try {
                const res = await fetch(`https://phimapi.com/v1/api/tim-kiem?keyword=${encodeURIComponent(keyword)}&limit=64`);
                const data = await res.json();
                const items = data?.data?.items || sampleMovies;
                const cdn = data?.data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";

                main.innerHTML = `
                    <h2 class="section-title">Kết quả tìm kiếm: "${escapeHtml(keyword)}"</h2>
                    <div id="search-results" class="movie-row"></div>
                    <h2 class="section-title">🎯 Gợi ý phim</h2>
                    <div id="suggested-movies" class="movie-row"></div>
                `;
                renderMovies(items, "search-results", cdn);

                const hotRes = await fetch("https://phimapi.com/danh-sach/phim-moi-cap-nhat?page=1");
                const hotData = await hotRes.json();
                const hotItems = hotData?.items?.slice(0, 10) || sampleMovies;
                const hotCdn = hotData?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";
                renderMovies(hotItems, "suggested-movies", hotCdn);

                const backBtn = document.createElement("button");
                backBtn.textContent = "⏎ Quay về trang chủ";
                backBtn.style.cssText = "margin:12px;padding:8px 12px;background:#222;border:none;color:#fff;border-radius:6px;cursor:pointer;";
                backBtn.onclick = () => {
                    if (main) {
                        main.innerHTML = originalMainHtml;
                        loadInitial();
                    }
                };
                main.insertBefore(backBtn, main.firstChild);
            } catch (e) {
                console.error("Search error", e);
                alert("Lỗi tìm kiếm phim");
                main.innerHTML = `
                    <h2 class="section-title">Kết quả tìm kiếm: "${escapeHtml(keyword)}"</h2>
                    <div id="search-results" class="movie-row"></div>
                `;
                renderMovies(sampleMovies, "search-results"); // Fallback to sample data
            }
        }

        // Escape HTML
        function escapeHtml(s) {
            return String(s).replace(/[&<>"']/g, (m) => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[m]));
        }

        // Popup detail
        const popup = document.getElementById("popup");
        const popupClose = document.getElementById("popupClose");
        if (popupClose) {
            popupClose.addEventListener("click", closePopup);
        }

        async function getMovieDetail(slug) {
            if (!slug) {
                alert("Không có slug phim");
                return;
            }
            try {
                const res = await fetch(`https://phimapi.com/phim/${slug}`);
                const data = await res.json();
                if (!data?.status) {
                    alert("Không tìm thấy thông tin phim");
                    return;
                }

                const movie = data.movie || {};
                const episodes = data.episodes?.[0]?.server_data || [];
                const cdnDomain = data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";

                if (movie.titleHead) document.title = movie.titleHead;
                if (movie.descriptionHead) {
                    let meta = document.querySelector('meta[name="description"]');
                    if (!meta) {
                        meta = document.createElement("meta");
                        meta.name = "description";
                        document.head.appendChild(meta);
                    }
                    meta.content = movie.descriptionHead;
                }

                const posterUrl = buildImageUrl(movie.poster_url || movie.thumb_url, cdnDomain);
                const moviePoster = document.getElementById("moviePoster");
                if (moviePoster) moviePoster.src = posterUrl;

                const movieTitle = document.getElementById("movieTitle");
                if (movieTitle) {
                    movieTitle.innerText = `${movie.name || movie.origin_name || "Không tên"} ${movie.year ? "(" + movie.year + ")" : ""}`;
                }

                const genres = (movie.category?.map(c => c.name).join(", ")) || "Không rõ";
                const countries = (movie.country?.map(c => c.name).join(", ")) || "Không rõ";
                const movieMeta = document.getElementById("movieMeta");
                if (movieMeta) {
                    movieMeta.innerHTML = `⏳ Thời gian: ${movie.time || 'N/A'} | ${movie.quality || 'N/A'} <br>🎭 Thể loại: ${genres}<br>🌐 Quốc gia: ${countries}`;
                }

                const descEl = document.getElementById("movieDesc");
                const toggleBtn = document.getElementById("toggleDescBtn");
                const descText = movie.content || "Không có mô tả cho phim này.";
                if (descEl) {
                    descEl.textContent = descText;
                    descEl.classList.remove("expanded");
                }
                if (toggleBtn) {
                    if (descText.length > 220) {
                        toggleBtn.style.display = "inline-block";
                        toggleBtn.textContent = "Xem thêm▼";
                        toggleBtn.onclick = () => {
                            const expanded = descEl.classList.toggle("expanded");
                            toggleBtn.textContent = expanded ? "Thu gọn" : "Xem thêm▼";
                        };
                    } else {
                        toggleBtn.style.display = "none";
                    }
                }

                const epList = document.getElementById("episodeList");
                if (epList) {
                    epList.innerHTML = episodes.map((ep, i) => {
                        const url = ep.link_embed || ep.link || ep.file || "#";
                        return `<button onclick="playEpisode('${url}')">Tập ${i + 1}</button>`;
                    }).join("");
                }

                openPopup();
            } catch (e) {
                console.error("Detail error", e);
                alert("Lỗi tìm chi tiết phim");
            }
        }

        function playEpisode(url) {
            if (!url || url === "#") {
                alert("Link không hợp lệ");
                return;
            }
            const player = document.getElementById("player");
            if (player) {
                player.innerHTML = `<iframe src="${url}" allowfullscreen></iframe>`;
                setTimeout(() => {
                    player.scrollIntoView({ behavior: "smooth", block: "center" });
                }, 120);
            }
        }

        function openPopup() {
            if (popup) {
                popup.style.display = "flex";
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function closePopup() {
            const player = document.getElementById("player");
            if (player) player.innerHTML = "";
            if (popup) popup.style.display = "none";
        }

        // Store original main HTML
        const mainEl = document.getElementById("main");
        const originalMainHtml = mainEl ? mainEl.innerHTML : "";

        // Wire search events
        const searchBtn = document.getElementById("searchBtn");
        const searchInput = document.getElementById("searchInput");
        if (searchBtn) {
            searchBtn.addEventListener("click", () => {
                const kw = searchInput?.value.trim() || "";
                searchMovies(kw);
            });
        }
        if (searchInput) {
            searchInput.addEventListener("keypress", (e) => {
                if (e.key === "Enter") {
                    searchBtn.click();
                }
            });
        }

        // Back to top functionality
        const backToTopBtn = document.getElementById("backToTop");
        if (backToTopBtn) {
            window.addEventListener("scroll", () => {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add("visible");
                } else {
                    backToTopBtn.classList.remove("visible");
                }
            });

            backToTopBtn.addEventListener("click", () => {
                window.scrollTo({ top: 0, behavior: "smooth" });
            });
        }

        // Category navigation
        const categoryItems = document.querySelectorAll(".category-item");
        categoryItems.forEach(item => {
            item.addEventListener("click", async function() {
                categoryItems.forEach(i => i.classList.remove("active"));
                this.classList.add("active");

                const filter = this.dataset.filter;
                const value = this.dataset.value;
                const main = document.getElementById("main");
                if (!main) return;

                if (filter === "all") {
                    main.innerHTML = originalMainHtml;
                    loadInitial();
                    return;
                }

                try {
                    let apiUrl;
                    if (filter === "category") {
                        apiUrl = `https://phimapi.com/v1/api/the-loai/${value}?page=1&limit=64`;
                    } else if (filter === "type") {
                        apiUrl = `https://phimapi.com/v1/api/danh-sach/${value}?page=1&limit=64`;
                    } else if (filter === "country") {
                        apiUrl = `https://phimapi.com/v1/api/quoc-gia/${value}?page=1&limit=64`;
                    }

                    const res = await fetch(apiUrl);
                    const data = await res.json();
                    const items = data?.data?.items || sampleMovies;
                    const cdn = data?.data?.APP_DOMAIN_CDN_IMAGE || "https://phimimg.com";

                    main.innerHTML = `
                        <h2 class="section-title">Kết quả: ${this.textContent}</h2>
                        <div id="filter-results" class="movie-row"></div>
                        <button id="backHomeBtn" style="margin:12px;padding:8px 12px;background:#222;border:none;color:#fff;border-radius:6px;cursor:pointer;">⏎ Quay về trang chủ</button>
                    `;
                    renderMovies(items, "filter-results", cdn);

                    const backHomeBtn = document.getElementById("backHomeBtn");
                    if (backHomeBtn) {
                        backHomeBtn.onclick = () => {
                            if (main) {
                                main.innerHTML = originalMainHtml;
                                loadInitial();
                            }
                        };
                    }
                } catch (e) {
                    console.error(`Error loading ${filter} ${value}`, e);
                    main.innerHTML = `
                        <h2 class="section-title">Kết quả: ${this.textContent}</h2>
                        <div id="filter-results" class="movie-row"></div>
                        <button id="backHomeBtn" style="margin:12px;padding:8px 12px;background:#222;border:none;color:#fff;border-radius:6px;cursor:pointer;">⏎ Quay về trang chủ</button>
                    `;
                    renderMovies(sampleMovies, "filter-results"); // Fallback to sample data
                }
            });
        });

        // Initialize
        document.addEventListener("DOMContentLoaded", loadInitial);
    </script>
</body>
</html>
